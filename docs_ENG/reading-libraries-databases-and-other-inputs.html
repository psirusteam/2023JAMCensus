<!DOCTYPE html>
<html lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.1 Reading Libraries, Databases, and Other Inputs | Area-Model-Methodologies-for-Census-Person-Count-Imputation</title>
  <meta name="description" content="Workshop on Capacity Building Installation" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="3.1 Reading Libraries, Databases, and Other Inputs | Area-Model-Methodologies-for-Census-Person-Count-Imputation" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Workshop on Capacity Building Installation" />
  <meta name="github-repo" content="psirusteam/HHS-Handbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.1 Reading Libraries, Databases, and Other Inputs | Area-Model-Methodologies-for-Census-Person-Count-Imputation" />
  
  <meta name="twitter:description" content="Workshop on Capacity Building Installation" />
  



<meta name="date" content="2023-08-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="filtering-and-refining-census-data.html"/>
<link rel="next" href="applying-filters-and-analyzing-the-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Workshop on Capacity Building Installation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Workshop Materials</a></li>
<li class="chapter" data-level="1" data-path="installation-of-libraries-and-required-software-for-bayesian-area-models..html"><a href="installation-of-libraries-and-required-software-for-bayesian-area-models..html"><i class="fa fa-check"></i><b>1</b> Installation of Libraries and Required Software for Bayesian Area Models.</a>
<ul>
<li class="chapter" data-level="1.1" data-path="step-1-installing-software.html"><a href="step-1-installing-software.html"><i class="fa fa-check"></i><b>1.1</b> Step 1: Installing Software</a></li>
<li class="chapter" data-level="1.2" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html"><i class="fa fa-check"></i><b>1.2</b> Step 2: Installing the following libraries in <em>R.</em></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#data-visualization-and-manipulation"><i class="fa fa-check"></i><b>1.2.1</b> Data Visualization and Manipulation:</a></li>
<li class="chapter" data-level="1.2.2" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#statistical-modeling"><i class="fa fa-check"></i><b>1.2.2</b> Statistical Modeling:</a></li>
<li class="chapter" data-level="1.2.3" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#survey-analysis"><i class="fa fa-check"></i><b>1.2.3</b> Survey Analysis:</a></li>
<li class="chapter" data-level="1.2.4" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#data-manipulation-and-transformation"><i class="fa fa-check"></i><b>1.2.4</b> Data Manipulation and Transformation:</a></li>
<li class="chapter" data-level="1.2.5" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#bayesian-analysis"><i class="fa fa-check"></i><b>1.2.5</b> Bayesian Analysis:</a></li>
<li class="chapter" data-level="1.2.6" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#geospatial-analysis"><i class="fa fa-check"></i><b>1.2.6</b> Geospatial Analysis:</a></li>
<li class="chapter" data-level="1.2.7" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#miscellaneous"><i class="fa fa-check"></i><b>1.2.7</b> Miscellaneous:</a></li>
<li class="chapter" data-level="1.2.8" data-path="step-2-installing-the-following-libraries-in-r..html"><a href="step-2-installing-the-following-libraries-in-r..html#step-by-step-guide-to-install-rstan"><i class="fa fa-check"></i><b>1.2.8</b> Step-by-Step Guide to Install rstan</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="step-3-validation-of-installation---ensuring-proper-rstan-installation.html"><a href="step-3-validation-of-installation---ensuring-proper-rstan-installation.html"><i class="fa fa-check"></i><b>1.3</b> Step 3: Validation of Installation - Ensuring Proper <code>rstan</code> Installation</a></li>
<li class="chapter" data-level="1.4" data-path="step-4-creating-a-google-earth-engine-account.html"><a href="step-4-creating-a-google-earth-engine-account.html"><i class="fa fa-check"></i><b>1.4</b> Step 4: Creating a Google Earth Engine Account:</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="standardization-and-validation-of-available-census-data-variables.html"><a href="standardization-and-validation-of-available-census-data-variables.html"><i class="fa fa-check"></i><b>2</b> Standardization and Validation of Available Census Data Variables</a>
<ul>
<li class="chapter" data-level="2.1" data-path="assigning-missing-values-to-the-h01a_total_personas-variable.html"><a href="assigning-missing-values-to-the-h01a_total_personas-variable.html"><i class="fa fa-check"></i><b>2.1</b> Assigning Missing Values to the ‘H01A_TOTAL_PERSONAS’ Variable</a></li>
<li class="chapter" data-level="2.2" data-path="descriptive-values-of-the-census-data.html"><a href="descriptive-values-of-the-census-data.html"><i class="fa fa-check"></i><b>2.2</b> Descriptive Values of the Census Data</a>
<ul>
<li class="chapter" data-level="" data-path="descriptive-values-of-the-census-data.html"><a href="descriptive-values-of-the-census-data.html#numeric-variables"><i class="fa fa-check"></i>Numeric Variables</a></li>
<li class="chapter" data-level="" data-path="descriptive-values-of-the-census-data.html"><a href="descriptive-values-of-the-census-data.html#character-variables"><i class="fa fa-check"></i>Character Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="organizing-results-in-a-database.html"><a href="organizing-results-in-a-database.html"><i class="fa fa-check"></i><b>2.3</b> Organizing Results in a Database</a></li>
<li class="chapter" data-level="2.4" data-path="updating-the-dataset-based-on-report-results.html"><a href="updating-the-dataset-based-on-report-results.html"><i class="fa fa-check"></i><b>2.4</b> Updating the Dataset Based on Report Results</a></li>
<li class="chapter" data-level="2.5" data-path="dataset-refinement-and-analysis.html"><a href="dataset-refinement-and-analysis.html"><i class="fa fa-check"></i><b>2.5</b> Dataset Refinement and Analysis</a></li>
<li class="chapter" data-level="2.6" data-path="summary-and-analysis-of-data.html"><a href="summary-and-analysis-of-data.html"><i class="fa fa-check"></i><b>2.6</b> Summary and Analysis of Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="filtering-and-refining-census-data.html"><a href="filtering-and-refining-census-data.html"><i class="fa fa-check"></i><b>3</b> Filtering and Refining Census Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="reading-libraries-databases-and-other-inputs.html"><a href="reading-libraries-databases-and-other-inputs.html"><i class="fa fa-check"></i><b>3.1</b> Reading Libraries, Databases, and Other Inputs</a>
<ul>
<li class="chapter" data-level="" data-path="reading-libraries-databases-and-other-inputs.html"><a href="reading-libraries-databases-and-other-inputs.html#reading-housing-data-without-coordinates."><i class="fa fa-check"></i>Reading Housing Data without Coordinates.</a></li>
<li class="chapter" data-level="" data-path="reading-libraries-databases-and-other-inputs.html"><a href="reading-libraries-databases-and-other-inputs.html#changing-ugm-codes-in-the-housing-data."><i class="fa fa-check"></i>Changing UGM Codes in the Housing Data.</a></li>
<li class="chapter" data-level="" data-path="reading-libraries-databases-and-other-inputs.html"><a href="reading-libraries-databases-and-other-inputs.html#read-the-standardized-census-data."><i class="fa fa-check"></i>Read the Standardized Census Data.</a></li>
<li class="chapter" data-level="" data-path="reading-libraries-databases-and-other-inputs.html"><a href="reading-libraries-databases-and-other-inputs.html#adding-the-age-sex-base."><i class="fa fa-check"></i>Adding the Age-Sex Base.</a></li>
<li class="chapter" data-level="3.1.1" data-path="reading-libraries-databases-and-other-inputs.html"><a href="reading-libraries-databases-and-other-inputs.html#inner-join-to-add-the-age-sex-base"><i class="fa fa-check"></i><b>3.1.1</b> Inner Join to Add the Age-Sex Base</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html"><i class="fa fa-check"></i><b>3.2</b> Applying filters and analyzing the data</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html#applying-the-first-filter-categorizing-households-with-residents-and-determining-greenpoint-status"><i class="fa fa-check"></i><b>3.2.1</b> Applying the first filter: categorizing households with residents and determining greenpoint status</a></li>
<li class="chapter" data-level="3.2.2" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html#applying-the-second-filter-worldpop-criterion"><i class="fa fa-check"></i><b>3.2.2</b> Applying the second filter: WorldPop criterion</a></li>
<li class="chapter" data-level="3.2.3" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html#summary-of-statistics-based-on-greenpoint2"><i class="fa fa-check"></i><b>3.2.3</b> Summary of Statistics Based on ‘greenpoint2’</a></li>
<li class="chapter" data-level="3.2.4" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html#defining-the-third-filter"><i class="fa fa-check"></i><b>3.2.4</b> Defining the Third Filter</a></li>
<li class="chapter" data-level="3.2.5" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html#combining-non-coordinated-houses"><i class="fa fa-check"></i><b>3.2.5</b> Combining non-coordinated houses</a></li>
<li class="chapter" data-level="3.2.6" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html#aggregating-statistics-and-summaries"><i class="fa fa-check"></i><b>3.2.6</b> Aggregating statistics and summaries</a></li>
<li class="chapter" data-level="3.2.7" data-path="applying-filters-and-analyzing-the-data.html"><a href="applying-filters-and-analyzing-the-data.html#extracting-and-saving-subset"><i class="fa fa-check"></i><b>3.2.7</b> Extracting and Saving Subset</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="standardization-and-validation-of-covariates.html"><a href="standardization-and-validation-of-covariates.html"><i class="fa fa-check"></i><b>4</b> Standardization and validation of covariates</a>
<ul>
<li class="chapter" data-level="4.1" data-path="environment-preparation-and-library-loading.html"><a href="environment-preparation-and-library-loading.html"><i class="fa fa-check"></i><b>4.1</b> Environment Preparation and Library Loading</a></li>
<li class="chapter" data-level="4.2" data-path="descriptive-values-of-the-ugms-base.html"><a href="descriptive-values-of-the-ugms-base.html"><i class="fa fa-check"></i><b>4.2</b> Descriptive values of the UGMS base</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="descriptive-values-of-the-ugms-base.html"><a href="descriptive-values-of-the-ugms-base.html#standardizing-variables-and-joining-datasets"><i class="fa fa-check"></i><b>4.2.1</b> Standardizing Variables and Joining Datasets</a></li>
<li class="chapter" data-level="4.2.2" data-path="descriptive-values-of-the-ugms-base.html"><a href="descriptive-values-of-the-ugms-base.html#standardize-numeric-variables-using-z-score-scaling"><i class="fa fa-check"></i><b>4.2.2</b> Standardize numeric variables using z-score scaling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="binomial-unit-model-for-occupied-dwellings.html"><a href="binomial-unit-model-for-occupied-dwellings.html"><i class="fa fa-check"></i><b>5</b> Binomial unit model for occupied dwellings</a>
<ul>
<li class="chapter" data-level="5.1" data-path="preparing-the-environment-and-data.html"><a href="preparing-the-environment-and-data.html"><i class="fa fa-check"></i><b>5.1</b> Preparing the Environment and Data</a></li>
<li class="chapter" data-level="5.2" data-path="defining-desocupada-column-classifying-occupancy-status.html"><a href="defining-desocupada-column-classifying-occupancy-status.html"><i class="fa fa-check"></i><b>5.2</b> Defining ‘Desocupada’ Column: Classifying Occupancy Status</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="defining-desocupada-column-classifying-occupancy-status.html"><a href="defining-desocupada-column-classifying-occupancy-status.html#counting-combinations-of-occupancy-status-and-greenpoint-values"><i class="fa fa-check"></i><b>5.2.1</b> Counting Combinations of Occupancy Status and Greenpoint Values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="consolidation-of-census-housing-databases.html"><a href="consolidation-of-census-housing-databases.html"><i class="fa fa-check"></i><b>6</b> Consolidation of CENSUS housing databases</a>
<ul>
<li class="chapter" data-level="6.1" data-path="defining-occupied-and-unoccupied-houses..html"><a href="defining-occupied-and-unoccupied-houses..html"><i class="fa fa-check"></i><b>6.1</b> Defining occupied and unoccupied houses.</a></li>
<li class="chapter" data-level="6.2" data-path="summary-measures-and-results-validation.html"><a href="summary-measures-and-results-validation.html"><i class="fa fa-check"></i><b>6.2</b> Summary Measures and Results Validation</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="estimation-of-the-number-of-people-per-household.html"><a href="estimation-of-the-number-of-people-per-household.html"><i class="fa fa-check"></i><b>7</b> Estimation of the number of people per household</a>
<ul>
<li class="chapter" data-level="7.1" data-path="reading-the-census-data..html"><a href="reading-the-census-data..html"><i class="fa fa-check"></i><b>7.1</b> Reading the census data.</a></li>
<li class="chapter" data-level="7.2" data-path="preparing-data-for-model-1.html"><a href="preparing-data-for-model-1.html"><i class="fa fa-check"></i><b>7.2</b> Preparing data for Model 1</a></li>
<li class="chapter" data-level="7.3" data-path="preparing-data-for-model-2.html"><a href="preparing-data-for-model-2.html"><i class="fa fa-check"></i><b>7.3</b> Preparing data for Model 2</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="consolidating-the-number-of-people-per-household.html"><a href="consolidating-the-number-of-people-per-household.html"><i class="fa fa-check"></i><b>8</b> consolidating the number of people per household</a></li>
<li class="chapter" data-level="9" data-path="multinomial-model-for-estimating-people-by-age-range-and-sex.html"><a href="multinomial-model-for-estimating-people-by-age-range-and-sex.html"><i class="fa fa-check"></i><b>9</b> Multinomial model for estimating people by age range and sex</a></li>
<li class="chapter" data-level="10" data-path="creating-the-census-base-with-predictions-from-the-multinomial-model.html"><a href="creating-the-census-base-with-predictions-from-the-multinomial-model.html"><i class="fa fa-check"></i><b>10</b> Creating the census base with predictions from the multinomial model</a>
<ul>
<li class="chapter" data-level="10.1" data-path="results-by-provinces.html"><a href="results-by-provinces.html"><i class="fa fa-check"></i><b>10.1</b> Results by Provinces</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="aggregated-estimations.html"><a href="aggregated-estimations.html"><i class="fa fa-check"></i><b>11</b> Aggregated Estimations</a>
<ul>
<li class="chapter" data-level="" data-path="aggregated-estimations.html"><a href="aggregated-estimations.html#reading-the-census-data.-1"><i class="fa fa-check"></i>Reading the census data.</a></li>
<li class="chapter" data-level="11.1" data-path="prediction-of-the-unoccupied-household-rate.html"><a href="prediction-of-the-unoccupied-household-rate.html"><i class="fa fa-check"></i><b>11.1</b> Prediction of the unoccupied household rate</a></li>
<li class="chapter" data-level="11.2" data-path="total-population-prediction.html"><a href="total-population-prediction.html"><i class="fa fa-check"></i><b>11.2</b> Total Population Prediction</a></li>
<li class="chapter" data-level="11.3" data-path="prediction-of-total-population-by-age-and-gender.html"><a href="prediction-of-total-population-by-age-and-gender.html"><i class="fa fa-check"></i><b>11.3</b> Prediction of Total Population by Age and Gender</a></li>
</ul></li>
<li class="divider"></li>
<li><a Workshop on Capacity Building Installation </a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reading-libraries-databases-and-other-inputs" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Reading Libraries, Databases, and Other Inputs<a href="reading-libraries-databases-and-other-inputs.html#reading-libraries-databases-and-other-inputs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section, we start by loading the necessary libraries used throughout the processing. Additionally, we define the columns that will be retained after applying the filters. We also make necessary adjustments to the databases, considering updates in the UGM codes.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="reading-libraries-databases-and-other-inputs.html#cb21-1" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb21-2"><a href="reading-libraries-databases-and-other-inputs.html#cb21-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)      <span class="co"># For data manipulation and visualization</span></span>
<span id="cb21-3"><a href="reading-libraries-databases-and-other-inputs.html#cb21-3" tabindex="-1"></a><span class="fu">library</span>(data.table)     <span class="co"># For efficient data handling</span></span>
<span id="cb21-4"><a href="reading-libraries-databases-and-other-inputs.html#cb21-4" tabindex="-1"></a><span class="fu">library</span>(openxlsx)       <span class="co"># For reading/writing Excel files</span></span>
<span id="cb21-5"><a href="reading-libraries-databases-and-other-inputs.html#cb21-5" tabindex="-1"></a><span class="fu">library</span>(magrittr)       <span class="co"># For pipe operators</span></span>
<span id="cb21-6"><a href="reading-libraries-databases-and-other-inputs.html#cb21-6" tabindex="-1"></a>select <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>select <span class="co"># Alias for dplyr&#39;s select function</span></span>
<span id="cb21-7"><a href="reading-libraries-databases-and-other-inputs.html#cb21-7" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;</span><span class="sc">\f</span><span class="st">&quot;</span>)               <span class="co"># Clear console output</span></span>
<span id="cb21-8"><a href="reading-libraries-databases-and-other-inputs.html#cb21-8" tabindex="-1"></a></span>
<span id="cb21-9"><a href="reading-libraries-databases-and-other-inputs.html#cb21-9" tabindex="-1"></a><span class="do">## Census data reading</span></span>
<span id="cb21-10"><a href="reading-libraries-databases-and-other-inputs.html#cb21-10" tabindex="-1"></a><span class="do">## Selection of columns of interest in the census.</span></span>
<span id="cb21-11"><a href="reading-libraries-databases-and-other-inputs.html#cb21-11" tabindex="-1"></a></span>
<span id="cb21-12"><a href="reading-libraries-databases-and-other-inputs.html#cb21-12" tabindex="-1"></a>Nombre_Columna <span class="ot">&lt;-</span>  <span class="fu">c</span>(</span>
<span id="cb21-13"><a href="reading-libraries-databases-and-other-inputs.html#cb21-13" tabindex="-1"></a>  <span class="st">&quot;un_ID&quot;</span> , </span>
<span id="cb21-14"><a href="reading-libraries-databases-and-other-inputs.html#cb21-14" tabindex="-1"></a>  <span class="st">&quot;PROV_ID&quot;</span> , </span>
<span id="cb21-15"><a href="reading-libraries-databases-and-other-inputs.html#cb21-15" tabindex="-1"></a>  <span class="st">&quot;CANT_ID&quot;</span> , </span>
<span id="cb21-16"><a href="reading-libraries-databases-and-other-inputs.html#cb21-16" tabindex="-1"></a>  <span class="st">&quot;DIST_ID&quot;</span> , </span>
<span id="cb21-17"><a href="reading-libraries-databases-and-other-inputs.html#cb21-17" tabindex="-1"></a>  <span class="st">&quot;UGM_ID&quot;</span> , </span>
<span id="cb21-18"><a href="reading-libraries-databases-and-other-inputs.html#cb21-18" tabindex="-1"></a>  <span class="st">&quot;LLAVEV&quot;</span> , </span>
<span id="cb21-19"><a href="reading-libraries-databases-and-other-inputs.html#cb21-19" tabindex="-1"></a>  <span class="st">&quot;V01_TIPO_VIVIENDA&quot;</span> , </span>
<span id="cb21-20"><a href="reading-libraries-databases-and-other-inputs.html#cb21-20" tabindex="-1"></a>  <span class="st">&quot;V02_OCUPACION_VIVIENDA&quot;</span> , </span>
<span id="cb21-21"><a href="reading-libraries-databases-and-other-inputs.html#cb21-21" tabindex="-1"></a>  <span class="st">&quot;H01A_TOTAL_PERSONAS&quot;</span> , </span>
<span id="cb21-22"><a href="reading-libraries-databases-and-other-inputs.html#cb21-22" tabindex="-1"></a>  <span class="st">&quot;greenpoint2&quot;</span>,</span>
<span id="cb21-23"><a href="reading-libraries-databases-and-other-inputs.html#cb21-23" tabindex="-1"></a>  <span class="st">&quot;Filters&quot;</span></span>
<span id="cb21-24"><a href="reading-libraries-databases-and-other-inputs.html#cb21-24" tabindex="-1"></a>) </span></code></pre></div>
<div id="reading-housing-data-without-coordinates." class="section level3 unnumbered hasAnchor">
<h3>Reading Housing Data without Coordinates.<a href="reading-libraries-databases-and-other-inputs.html#reading-housing-data-without-coordinates." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we read the housing data from a CSV file that does not include coordinates. We then transform the data into the required format, including variables such as province ID, canton ID, and district ID based on the given codes. The resulting dataset will be used for further analysis and processing.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="reading-libraries-databases-and-other-inputs.html#cb22-1" tabindex="-1"></a>Viviendas_sin_coordenadas <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">&quot;Recursos/02_Census_Filters/Data/Viviendas sin coordenadas.csv&quot;</span>)</span>
<span id="cb22-2"><a href="reading-libraries-databases-and-other-inputs.html#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="reading-libraries-databases-and-other-inputs.html#cb22-3" tabindex="-1"></a><span class="co"># Transmute data to required format</span></span>
<span id="cb22-4"><a href="reading-libraries-databases-and-other-inputs.html#cb22-4" tabindex="-1"></a>Viviendas_sin_coordenadas <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb22-5"><a href="reading-libraries-databases-and-other-inputs.html#cb22-5" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb22-6"><a href="reading-libraries-databases-and-other-inputs.html#cb22-6" tabindex="-1"></a>    LLAVEV,</span>
<span id="cb22-7"><a href="reading-libraries-databases-and-other-inputs.html#cb22-7" tabindex="-1"></a>    <span class="at">PROV_ID =</span> <span class="fu">str_sub</span>(CODIGO_PCD, <span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb22-8"><a href="reading-libraries-databases-and-other-inputs.html#cb22-8" tabindex="-1"></a>    <span class="at">CANT_ID =</span> <span class="fu">str_sub</span>(CODIGO_PCD, <span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb22-9"><a href="reading-libraries-databases-and-other-inputs.html#cb22-9" tabindex="-1"></a>    <span class="at">DIST_ID    =</span> <span class="fu">as.character</span>(CODIGO_PCD),</span>
<span id="cb22-10"><a href="reading-libraries-databases-and-other-inputs.html#cb22-10" tabindex="-1"></a>    <span class="at">UGM_ID =</span> <span class="fu">paste0</span>(CODIGO_PCD , ID_UGM), </span>
<span id="cb22-11"><a href="reading-libraries-databases-and-other-inputs.html#cb22-11" tabindex="-1"></a>    <span class="at">H01A_TOTAL_PERSONAS =</span> H01A_TOTAL_RESIDENTES_HAB)</span></code></pre></div>
</div>
<div id="changing-ugm-codes-in-the-housing-data." class="section level3 unnumbered hasAnchor">
<h3>Changing UGM Codes in the Housing Data.<a href="reading-libraries-databases-and-other-inputs.html#changing-ugm-codes-in-the-housing-data." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we modify the UGM (Urban Geographic Micro-data) codes in the housing data to ensure consistency and accuracy. Certain UGM codes are updated according to predefined mappings. This step is crucial for maintaining uniformity in the data for subsequent analysis.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="reading-libraries-databases-and-other-inputs.html#cb23-1" tabindex="-1"></a>Viviendas_sin_coordenadas <span class="sc">%&lt;&gt;%</span></span>
<span id="cb23-2"><a href="reading-libraries-databases-and-other-inputs.html#cb23-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">UGM_ID =</span> </span>
<span id="cb23-3"><a href="reading-libraries-databases-and-other-inputs.html#cb23-3" tabindex="-1"></a>           <span class="fu">case_when</span>(</span>
<span id="cb23-4"><a href="reading-libraries-databases-and-other-inputs.html#cb23-4" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;10108228&quot;</span> <span class="sc">~</span> <span class="st">&quot;10108158&quot;</span>,</span>
<span id="cb23-5"><a href="reading-libraries-databases-and-other-inputs.html#cb23-5" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;10805037&quot;</span> <span class="sc">~</span> <span class="st">&quot;10807037&quot;</span>,</span>
<span id="cb23-6"><a href="reading-libraries-databases-and-other-inputs.html#cb23-6" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803124&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803024&quot;</span>,</span>
<span id="cb23-7"><a href="reading-libraries-databases-and-other-inputs.html#cb23-7" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803150&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803050&quot;</span>,</span>
<span id="cb23-8"><a href="reading-libraries-databases-and-other-inputs.html#cb23-8" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803151&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803051&quot;</span>,</span>
<span id="cb23-9"><a href="reading-libraries-databases-and-other-inputs.html#cb23-9" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;20302131&quot;</span> <span class="sc">~</span> <span class="st">&quot;20302031&quot;</span>,</span>
<span id="cb23-10"><a href="reading-libraries-databases-and-other-inputs.html#cb23-10" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;21305106&quot;</span> <span class="sc">~</span> <span class="st">&quot;21305006&quot;</span>,</span>
<span id="cb23-11"><a href="reading-libraries-databases-and-other-inputs.html#cb23-11" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30101232&quot;</span> <span class="sc">~</span> <span class="st">&quot;30101132&quot;</span>,</span>
<span id="cb23-12"><a href="reading-libraries-databases-and-other-inputs.html#cb23-12" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30201354&quot;</span> <span class="sc">~</span> <span class="st">&quot;30201254&quot;</span>,</span>
<span id="cb23-13"><a href="reading-libraries-databases-and-other-inputs.html#cb23-13" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30302158&quot;</span> <span class="sc">~</span> <span class="st">&quot;30302133&quot;</span>,</span>
<span id="cb23-14"><a href="reading-libraries-databases-and-other-inputs.html#cb23-14" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30305186&quot;</span> <span class="sc">~</span> <span class="st">&quot;30305086&quot;</span>,</span>
<span id="cb23-15"><a href="reading-libraries-databases-and-other-inputs.html#cb23-15" tabindex="-1"></a>             <span class="cn">TRUE</span> <span class="sc">~</span>UGM_ID</span>
<span id="cb23-16"><a href="reading-libraries-databases-and-other-inputs.html#cb23-16" tabindex="-1"></a>           ))</span></code></pre></div>
</div>
<div id="read-the-standardized-census-data." class="section level3 unnumbered hasAnchor">
<h3>Read the Standardized Census Data.<a href="reading-libraries-databases-and-other-inputs.html#read-the-standardized-census-data." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we read the standardized census data from a stored RDS (R Data Serialization) file. Similar to the previous step, we adjust the UGM codes to maintain data consistency. The standardized census data will serve as the foundation for the subsequent filtering and refinement processes.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="reading-libraries-databases-and-other-inputs.html#cb24-1" tabindex="-1"></a>censo1 <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;Recursos/02_Census_Filters/Data/censo_estandarizado.rds&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="reading-libraries-databases-and-other-inputs.html#cb24-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">UGM_ID =</span></span>
<span id="cb24-3"><a href="reading-libraries-databases-and-other-inputs.html#cb24-3" tabindex="-1"></a>           <span class="fu">case_when</span>(</span>
<span id="cb24-4"><a href="reading-libraries-databases-and-other-inputs.html#cb24-4" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;10108228&quot;</span> <span class="sc">~</span> <span class="st">&quot;10108158&quot;</span>,</span>
<span id="cb24-5"><a href="reading-libraries-databases-and-other-inputs.html#cb24-5" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;10805037&quot;</span> <span class="sc">~</span> <span class="st">&quot;10807037&quot;</span>,</span>
<span id="cb24-6"><a href="reading-libraries-databases-and-other-inputs.html#cb24-6" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803124&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803024&quot;</span>,</span>
<span id="cb24-7"><a href="reading-libraries-databases-and-other-inputs.html#cb24-7" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803150&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803050&quot;</span>,</span>
<span id="cb24-8"><a href="reading-libraries-databases-and-other-inputs.html#cb24-8" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803151&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803051&quot;</span>,</span>
<span id="cb24-9"><a href="reading-libraries-databases-and-other-inputs.html#cb24-9" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;20302131&quot;</span> <span class="sc">~</span> <span class="st">&quot;20302031&quot;</span>,</span>
<span id="cb24-10"><a href="reading-libraries-databases-and-other-inputs.html#cb24-10" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;21305106&quot;</span> <span class="sc">~</span> <span class="st">&quot;21305006&quot;</span>,</span>
<span id="cb24-11"><a href="reading-libraries-databases-and-other-inputs.html#cb24-11" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30101232&quot;</span> <span class="sc">~</span> <span class="st">&quot;30101132&quot;</span>,</span>
<span id="cb24-12"><a href="reading-libraries-databases-and-other-inputs.html#cb24-12" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30201354&quot;</span> <span class="sc">~</span> <span class="st">&quot;30201254&quot;</span>,</span>
<span id="cb24-13"><a href="reading-libraries-databases-and-other-inputs.html#cb24-13" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30302158&quot;</span> <span class="sc">~</span> <span class="st">&quot;30302133&quot;</span>,</span>
<span id="cb24-14"><a href="reading-libraries-databases-and-other-inputs.html#cb24-14" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30305186&quot;</span> <span class="sc">~</span> <span class="st">&quot;30305086&quot;</span>,</span>
<span id="cb24-15"><a href="reading-libraries-databases-and-other-inputs.html#cb24-15" tabindex="-1"></a>             <span class="cn">TRUE</span> <span class="sc">~</span>UGM_ID</span>
<span id="cb24-16"><a href="reading-libraries-databases-and-other-inputs.html#cb24-16" tabindex="-1"></a>           ))</span></code></pre></div>
</div>
<div id="adding-the-age-sex-base." class="section level3 unnumbered hasAnchor">
<h3>Adding the Age-Sex Base.<a href="reading-libraries-databases-and-other-inputs.html#adding-the-age-sex-base." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we incorporate the age-sex base into the analysis. The age-sex base is read from a stored RDS file. As in previous steps, we ensure consistency by adjusting the UGM codes. The age-sex base provides valuable demographic information and will be utilized in the subsequent filtering and refinement procedures.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="reading-libraries-databases-and-other-inputs.html#cb25-1" tabindex="-1"></a>censo_sexo_edad <span class="ot">&lt;-</span></span>
<span id="cb25-2"><a href="reading-libraries-databases-and-other-inputs.html#cb25-2" tabindex="-1"></a>  <span class="fu">readRDS</span>(<span class="st">&quot;Recursos/02_Census_Filters/Data/Censo con grupos por sexo.rds&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="reading-libraries-databases-and-other-inputs.html#cb25-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>H01A_TOTAL_PERSONAS ) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="reading-libraries-databases-and-other-inputs.html#cb25-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">UGM_ID =</span></span>
<span id="cb25-5"><a href="reading-libraries-databases-and-other-inputs.html#cb25-5" tabindex="-1"></a>           <span class="fu">case_when</span>(</span>
<span id="cb25-6"><a href="reading-libraries-databases-and-other-inputs.html#cb25-6" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;10108228&quot;</span> <span class="sc">~</span> <span class="st">&quot;10108158&quot;</span>,</span>
<span id="cb25-7"><a href="reading-libraries-databases-and-other-inputs.html#cb25-7" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;10805037&quot;</span> <span class="sc">~</span> <span class="st">&quot;10807037&quot;</span>,</span>
<span id="cb25-8"><a href="reading-libraries-databases-and-other-inputs.html#cb25-8" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803124&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803024&quot;</span>,</span>
<span id="cb25-9"><a href="reading-libraries-databases-and-other-inputs.html#cb25-9" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803150&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803050&quot;</span>,</span>
<span id="cb25-10"><a href="reading-libraries-databases-and-other-inputs.html#cb25-10" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;11803151&quot;</span> <span class="sc">~</span> <span class="st">&quot;11803051&quot;</span>,</span>
<span id="cb25-11"><a href="reading-libraries-databases-and-other-inputs.html#cb25-11" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;20302131&quot;</span> <span class="sc">~</span> <span class="st">&quot;20302031&quot;</span>,</span>
<span id="cb25-12"><a href="reading-libraries-databases-and-other-inputs.html#cb25-12" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;21305106&quot;</span> <span class="sc">~</span> <span class="st">&quot;21305006&quot;</span>,</span>
<span id="cb25-13"><a href="reading-libraries-databases-and-other-inputs.html#cb25-13" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30101232&quot;</span> <span class="sc">~</span> <span class="st">&quot;30101132&quot;</span>,</span>
<span id="cb25-14"><a href="reading-libraries-databases-and-other-inputs.html#cb25-14" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30201354&quot;</span> <span class="sc">~</span> <span class="st">&quot;30201254&quot;</span>,</span>
<span id="cb25-15"><a href="reading-libraries-databases-and-other-inputs.html#cb25-15" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30302158&quot;</span> <span class="sc">~</span> <span class="st">&quot;30302133&quot;</span>,</span>
<span id="cb25-16"><a href="reading-libraries-databases-and-other-inputs.html#cb25-16" tabindex="-1"></a>             UGM_ID <span class="sc">==</span> <span class="st">&quot;30305186&quot;</span> <span class="sc">~</span> <span class="st">&quot;30305086&quot;</span>,</span>
<span id="cb25-17"><a href="reading-libraries-databases-and-other-inputs.html#cb25-17" tabindex="-1"></a>             <span class="cn">TRUE</span> <span class="sc">~</span>UGM_ID</span>
<span id="cb25-18"><a href="reading-libraries-databases-and-other-inputs.html#cb25-18" tabindex="-1"></a>           ))</span></code></pre></div>
</div>
<div id="inner-join-to-add-the-age-sex-base" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Inner Join to Add the Age-Sex Base<a href="reading-libraries-databases-and-other-inputs.html#inner-join-to-add-the-age-sex-base" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, an inner join operation is performed to integrate the age-sex base with the census data. The difference in row count between the two bases corresponds to paper-censused households that are included later in the process. The number of rows in the age-sex base is compared to the census data and the housing data without coordinates to verify the match.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="reading-libraries-databases-and-other-inputs.html#cb26-1" tabindex="-1"></a><span class="do">## The difference between the bases corresponds to paper-censused households</span></span>
<span id="cb26-2"><a href="reading-libraries-databases-and-other-inputs.html#cb26-2" tabindex="-1"></a><span class="do">## that are included later</span></span>
<span id="cb26-3"><a href="reading-libraries-databases-and-other-inputs.html#cb26-3" tabindex="-1"></a><span class="fu">nrow</span>(censo_sexo_edad) <span class="sc">-</span> <span class="fu">nrow</span>(censo1) </span>
<span id="cb26-4"><a href="reading-libraries-databases-and-other-inputs.html#cb26-4" tabindex="-1"></a><span class="fu">nrow</span>(Viviendas_sin_coordenadas)</span>
<span id="cb26-5"><a href="reading-libraries-databases-and-other-inputs.html#cb26-5" tabindex="-1"></a></span>
<span id="cb26-6"><a href="reading-libraries-databases-and-other-inputs.html#cb26-6" tabindex="-1"></a><span class="do">## Inner join to add the age-sex base</span></span>
<span id="cb26-7"><a href="reading-libraries-databases-and-other-inputs.html#cb26-7" tabindex="-1"></a></span>
<span id="cb26-8"><a href="reading-libraries-databases-and-other-inputs.html#cb26-8" tabindex="-1"></a>censo1 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(</span>
<span id="cb26-9"><a href="reading-libraries-databases-and-other-inputs.html#cb26-9" tabindex="-1"></a>  censo1,</span>
<span id="cb26-10"><a href="reading-libraries-databases-and-other-inputs.html#cb26-10" tabindex="-1"></a>  censo_sexo_edad,</span>
<span id="cb26-11"><a href="reading-libraries-databases-and-other-inputs.html#cb26-11" tabindex="-1"></a>  <span class="fu">join_by</span>(</span>
<span id="cb26-12"><a href="reading-libraries-databases-and-other-inputs.html#cb26-12" tabindex="-1"></a>    un_ID,</span>
<span id="cb26-13"><a href="reading-libraries-databases-and-other-inputs.html#cb26-13" tabindex="-1"></a>    PROV_ID,</span>
<span id="cb26-14"><a href="reading-libraries-databases-and-other-inputs.html#cb26-14" tabindex="-1"></a>    CANT_ID,</span>
<span id="cb26-15"><a href="reading-libraries-databases-and-other-inputs.html#cb26-15" tabindex="-1"></a>    DIST_ID,</span>
<span id="cb26-16"><a href="reading-libraries-databases-and-other-inputs.html#cb26-16" tabindex="-1"></a>    UGM_ID,</span>
<span id="cb26-17"><a href="reading-libraries-databases-and-other-inputs.html#cb26-17" tabindex="-1"></a>    LLAVEV,</span>
<span id="cb26-18"><a href="reading-libraries-databases-and-other-inputs.html#cb26-18" tabindex="-1"></a>    V01_TIPO_VIVIENDA,</span>
<span id="cb26-19"><a href="reading-libraries-databases-and-other-inputs.html#cb26-19" tabindex="-1"></a>    V02_OCUPACION_VIVIENDA</span>
<span id="cb26-20"><a href="reading-libraries-databases-and-other-inputs.html#cb26-20" tabindex="-1"></a>  )</span>
<span id="cb26-21"><a href="reading-libraries-databases-and-other-inputs.html#cb26-21" tabindex="-1"></a>)</span></code></pre></div>
<p>The code begins by calculating the difference in row count between the age-sex base (<code>censo_sexo_edad</code>) and the existing census data (<code>censo1</code>). This difference represents the number of paper-censused households that are not yet included in the census data. Additionally, the number of rows in the housing data without coordinates (<code>Viviendas_sin_coordenadas</code>) is determined for reference.</p>
<p>The <code>inner_join</code> operation is then applied to merge the age-sex base with the census data. The <code>join_by</code> function specifies the columns used for the join operation, ensuring a comprehensive integration of data from both sources. This process enhances the dataset by incorporating important demographic information for further analysis.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="filtering-and-refining-census-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="applying-filters-and-analyzing-the-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/psirusteam/2021ASDA/02_Housing_Census_Filters.qmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Area Model Methodologies for Census Person Count Imputation.pdf", "Area Model Methodologies for Census Person Count Imputation.epub", "Area Model Methodologies for Census Person Count Imputation.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"tconfig": null
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
